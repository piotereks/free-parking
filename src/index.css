@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base layer - global resets and defaults */
@layer base {
  html,
  body {
    @apply m-0 p-0 w-full h-full overflow-hidden;
  }

  body {
    @apply font-sans transition-theme duration-300;
  }

  /* CSS Custom Properties */
  :root {
    --accent-glow: #00d9ff;
  }

  /* Light theme (default) */
  body {
    @apply bg-bg-primary-light text-text-primary-light;
  }

  /* Dark theme */
  body.dark {
    @apply bg-bg-primary-dark text-text-primary-dark;
  }
}

/* Component layer - reusable component classes */
@layer components {
  /* Layout */
  .page-wrapper {
    @apply flex flex-col h-screen w-screen;
  }

  .container-main {
    @apply max-w-screen-xl mx-auto px-8 py-8 flex-1 overflow-y-auto;
    @apply flex flex-col items-center;
  }

  /* Wrapper for centering dashboard content */
  .container-main > * {
    @apply w-full max-w-5xl;
  }

  /* Header */
  .header-controls {
    @apply flex justify-between items-center px-6 z-[100] flex-shrink-0;
    @apply bg-bg-secondary-light border-b border-border-light transition-theme duration-300;
    height: 60px;
    box-shadow: 0 1px 10px rgba(0, 0, 0, 0.2);
  }

  .dark .header-controls {
    @apply bg-bg-secondary-dark border-border-dark;
  }

  .header-title-group {
    @apply flex flex-col;
  }

  .header-title-group h1 {
    @apply text-xl font-bold tracking-tight m-0 leading-tight;
  }

  .title-icon {
    @apply inline-block w-7 text-center;
  }

  .title-text-short {
    @apply hidden;
  }

  .status-info {
    @apply text-xs font-normal mt-0.5 pl-7 text-text-secondary-light;
  }

  .dark .status-info {
    @apply text-text-secondary-dark;
  }

  .header-actions {
    @apply flex items-center gap-3;
  }

  /* Buttons */
  .nav-btn {
    @apply flex items-center justify-center px-4 py-2 rounded-lg text-sm font-semibold;
    @apply transition-all duration-200 cursor-pointer;
    @apply bg-bg-primary-light border border-border-light text-text-primary-light;
    @apply shadow-custom-light;
    height: 44px;
    width: 140px;
  }

  .dark .nav-btn {
    @apply bg-bg-primary-dark border-border-dark text-text-primary-dark shadow-custom-dark;
  }

  .nav-btn:hover,
  .nav-btn.active {
    @apply -translate-y-px border-accent;
    @apply bg-bg-card-light shadow-hover-light;
  }

  .dark .nav-btn:hover,
  .dark .nav-btn.active {
    @apply bg-bg-card-dark shadow-hover-dark;
  }

  .btn-icon {
    @apply mr-2 text-lg;
  }

  .btn-text {
    /* Shown by default, hidden on mobile via media query */
  }

  /* Theme toggle */
  .theme-toggle {
    @apply flex items-center justify-center rounded-lg cursor-pointer;
    @apply transition-all duration-200 border;
    @apply bg-bg-primary-light border-border-light text-text-primary-light shadow-custom-light;
    width: 44px;
    height: 44px;
  }

  .dark .theme-toggle {
    @apply bg-bg-primary-dark border-border-dark text-text-primary-dark shadow-custom-dark;
  }

  .theme-toggle:hover {
    @apply scale-110 bg-bg-card-light;
  }

  .dark .theme-toggle:hover {
    @apply bg-bg-card-dark;
  }

  /* Palette selector */
  .palette-group {
    @apply flex items-center gap-2 mr-2 pr-3 border-r border-border-light;
  }

  .dark .palette-group {
    @apply border-border-dark;
  }

  .palette-label {
    @apply text-xs font-semibold mr-1 text-text-secondary-light;
  }

  .dark .palette-label {
    @apply text-text-secondary-dark;
  }

  .palette-btn {
    @apply w-5 h-5 rounded-full border-2 border-transparent cursor-pointer transition-transform duration-200;
  }

  .palette-btn:hover {
    @apply scale-125;
  }

  .palette-btn.active {
    @apply border-current;
    box-shadow: 0 0 5px var(--accent-glow);
  }

  .palette-toggle-btn {
    @apply px-2.5 py-1 text-xs rounded border cursor-pointer transition-all duration-200;
    @apply bg-bg-primary-light border-border-light text-text-secondary-light;
  }

  .dark .palette-toggle-btn {
    @apply bg-bg-primary-dark border-border-dark text-text-secondary-dark;
  }

  .palette-toggle-btn:hover {
    @apply bg-bg-card-light text-text-primary-light;
  }

  .dark .palette-toggle-btn:hover {
    @apply bg-bg-card-dark text-text-primary-dark;
  }

  /* Dashboard */
  .subtitle {
    @apply mb-6 text-base text-text-secondary-light;
    @apply w-full text-center;
  }

  .dark .subtitle {
    @apply text-text-secondary-dark;
  }

  .grid-container {
    @apply grid gap-6 mb-8 w-full;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  }

  .parking-card {
    @apply rounded-card p-4 flex flex-col items-center justify-center;
    @apply transition-transform duration-200 border;
    @apply bg-bg-secondary-light border-border-light shadow-custom-light;
  }

  .dark .parking-card {
    @apply bg-bg-secondary-dark border-border-dark shadow-custom-dark;
  }

  .parking-card:hover {
    @apply scale-105;
  }

  .parking-name {
    @apply text-base font-semibold mb-1 text-center text-text-secondary-light;
  }

  .dark .parking-name {
    @apply text-text-secondary-dark;
  }

  .free-spots {
    @apply text-spot-number font-bold text-success-dark;
  }

  body:not(.dark) .free-spots {
    @apply text-success-light;
  }

  .free-spots.age-old {
    @apply text-warning-dark;
  }

  body:not(.dark) .free-spots.age-old {
    @apply text-warning-light;
  }

  .free-spots.age-medium {
    @apply text-warning-medium-dark;
  }

  body:not(.dark) .free-spots.age-medium {
    @apply text-warning-medium-light;
  }

  .age-indicator-small,
  .timestamp-small {
    @apply text-xs mt-1 text-text-secondary-light;
  }

  .dark .age-indicator-small,
  .dark .timestamp-small {
    @apply text-text-secondary-dark;
  }

  /* Status panel */
  .status-panel {
    @apply flex flex-col rounded-card mb-8 border w-full;
    @apply bg-bg-secondary-light border-border-light shadow-custom-light;
  }

  .dark .status-panel {
    @apply bg-bg-secondary-dark border-border-dark shadow-custom-dark;
  }

  .panel-sections-wrapper {
    @apply flex justify-between w-full;
  }

  .panel-section {
    @apply flex-1 p-6 flex flex-col items-center text-center;
  }

  .status-label {
    @apply text-sm mb-2 text-text-secondary-light;
  }

  .dark .status-label {
    @apply text-text-secondary-dark;
  }

  .status-value {
    @apply text-3xl font-bold text-success-dark;
  }

  body:not(.dark) .status-value {
    @apply text-success-light;
  }

  .status-value.age-old {
    @apply text-warning-dark;
  }

  body:not(.dark) .status-value.age-old {
    @apply text-warning-light;
  }

  .status-value.age-medium {
    @apply text-warning-medium-dark;
  }

  body:not(.dark) .status-value.age-medium {
    @apply text-warning-medium-light;
  }

  .status-description {
    @apply text-sm mt-2 px-6 pb-4 text-center font-bold;
    @apply text-success-dark;
    font-size: 1.125rem; /* 18px for wide screen */
  }

  body:not(.dark) .status-description {
    @apply text-success-light;
  }

  .dark .status-description {
    @apply text-success-dark;
  }

  .status-description.age-old {
    @apply text-warning-dark;
  }

  body:not(.dark) .status-description.age-old {
    @apply text-warning-light;
  }

  .status-description.age-medium {
    @apply text-warning-medium-dark;
  }

  body:not(.dark) .status-description.age-medium {
    @apply text-warning-medium-light;
  }

  .big-value {
    @apply text-[2.5rem];
  }

  .time-group {
    @apply flex items-baseline gap-3 font-bold;
  }

  .status-current-inline {
    @apply text-base text-text-secondary-light;
  }

  .dark .status-current-inline {
    @apply text-text-secondary-dark;
  }

  /* Error state */
  .error {
    @apply rounded-lg p-4 mb-4 text-warning-dark;
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid currentColor;
  }

  body:not(.dark) .error {
    @apply text-warning-light;
  }

  /* Statistics */
  .stats-container {
    @apply flex-1 relative p-0 w-full overflow-hidden;
  }

  /* Loader */
  .loader {
    @apply flex justify-center items-center h-full text-xl text-accent;
  }
}

/* Responsive styles */
@media (max-width: 600px) {
  html {
    height: -webkit-fill-available;
  }

  .page-wrapper {
    min-height: -webkit-fill-available;
  }

  .container-main {
    @apply px-4 py-4;
  }

  .stats-container {
    @apply pb-[55px] min-h-0;
  }

  .header-controls {
    @apply px-2;
    height: 54px;
  }

  .header-title-group h1 {
    @apply text-[1.3rem];
  }

  .title-text-full {
    @apply hidden;
  }

  .title-text-short {
    @apply inline;
  }

  .btn-text {
    @apply hidden;
  }

  .btn-icon {
    @apply mr-0;
  }

  .nav-btn {
    @apply px-0;
    width: 44px;
    height: 38px;
  }

  .theme-toggle {
    @apply text-base;
    width: 44px;
    height: 38px;
  }

  .status-info {
    @apply hidden;
  }

  .status-panel {
    @apply flex-col;
  }

  .panel-sections-wrapper {
    @apply flex-col;
  }

  .panel-section {
    @apply border-b p-4 border-border-light;
  }

  .dark .panel-section {
    @apply border-border-dark;
  }

  .panel-section:last-child {
    @apply border-b-0;
  }

  .status-description {
    font-size: 0.875rem; /* 14px for mobile - slightly larger */
    @apply px-4 pb-3;
  }

  .grid-container {
    @apply grid-cols-2 gap-3;
  }

  .free-spots {
    @apply text-spot-number-mobile;
  }

  .palette-group {
    @apply border-r-0 pr-0;
  }

  .palette-label,
  .palette-toggle-btn {
    @apply hidden;
  }

  .palette-btn {
    @apply w-[18px] h-[18px];
  }
}